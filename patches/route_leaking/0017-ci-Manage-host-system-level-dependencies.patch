From 41457c0ff849d985f0d78eeefe3151f12aefff51 Mon Sep 17 00:00:00 2001
From: Frode Nordahl <fnordahl@ubuntu.com>
Date: Mon, 4 Nov 2024 12:04:31 +0100
Subject: [PATCH 17/31] ci: Manage host/system level dependencies.

Most dependencies are managed in the `prepare-container` job,
but there are some host/system level dependencies.

This will be used by a subsequent patch that adds system tests
that require the `vrf` kernel module to be loaded.

Signed-off-by: Frode Nordahl <fnordahl@ubuntu.com>
---
 .github/workflows/test.yml | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/.github/workflows/test.yml b/.github/workflows/test.yml
index 82e09fbef..12fac0c59 100644
--- a/.github/workflows/test.yml
+++ b/.github/workflows/test.yml
@@ -108,6 +108,11 @@ jobs:
         - { arch: x86, compiler: gcc, opts: --disable-ssl }
 
     steps:
+    - name: system-level-dependencies
+      run: |
+        sudo apt update
+        sudo apt -y install linux-modules-extra-$(uname -r)
+
     - name: checkout
       if: github.event_name == 'push' || github.event_name == 'pull_request'
       uses: actions/checkout@v4
-- 
2.45.2

